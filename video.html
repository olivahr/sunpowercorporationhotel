<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mandatory Safety Training</title>
<link rel="stylesheet" href="style.css" />
</head>

<body>

<header class="app-header">
  <div class="header-left">
    <img src="logo.jpg" class="logo-small" alt="SunPower" />
    <div class="header-text">
      <strong>SunPower</strong>
      <span>Corporate Safety Training</span>
    </div>
  </div>
</header>

<main style="padding: 20px; text-align: center;">

  <section class="hotel-card">
    <h2>Mandatory Safety & Compliance Training</h2>
    <p style="font-size:13px;color:#555;margin-top:6px;">
      This video is required before continuing to the corporate lodging application.
      Please watch the full video. Skipping is not allowed.
    </p>
  </section>

  <!-- VIDEO -->
  <section class="room-card" style="margin-top:16px;">
    <video
      id="trainingVideo"
      width="100%"
      controls
      controlsList="nodownload noplaybackrate"
      disablePictureInPicture
      oncontextmenu="return false"
      style="border-radius:12px;"
    >
      <source src="video.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </section>

  <!-- CONTINUE BUTTON (HIDDEN UNTIL COMPLETE) -->
  <section id="continueSection" style="display:none;margin-top:22px;">
    <a href="aplicacion.html" class="pay-btn">
      Continue to Application
    </a>
  </section>

</main>

<footer class="footer">
  ©️ 2026 SunPower Corporation · Safety & Compliance Training
</footer>

<script>
  const video = document.getElementById("trainingVideo");
  const continueSection = document.getElementById("continueSection");

  // Check if already completed
  if (localStorage.getItem("trainingCompleted") === "true") {
    continueSection.style.display = "block";
  }

  // Disable skipping
  let lastTime = 0;
  video.addEventListener("timeupdate", () => {
    if (!video.seeking) {
      lastTime = video.currentTime;
    }
  });

  video.addEventListener("seeking", () => {
    if (video.currentTime > lastTime + 0.01) {
      video.currentTime = lastTime;
    }
  });

  // When video ends
  video.addEventListener("ended", () => {
    localStorage.setItem("trainingCompleted", "true");
    continueSection.style.display = "block";
  });
</script>

</body>
</html>
